{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","src/js/components/modal.js","node_modules/@parcel/runtime-js/lib/runtime-cd72a9158cd2f039.js","node_modules/@parcel/runtime-js/lib/helpers/bundle-url.js","node_modules/@parcel/runtime-js/lib/runtime-f591c98161e0cb11.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","import { refs } from '../refs/refs';\nimport { getGenresIdsList } from '../api/getGenresIdsList';\nimport { FetchApiMovies } from '../api/fetchMovies';\nimport { renderMoviesList } from '../templates/renderMovies';\nimport { load } from '../library/localStorage';\nimport { addToLibrary } from '../library/localStorage';\nimport { removeFromLibrary } from '../library/localStorage';\nimport { getAllLibraryMovies } from '../library/helper';\nimport { Loader } from './loader';\n\nconst loader = new Loader();\nconst fetchApiMovies = new FetchApiMovies();\nconst noPoster = new URL('../../images/no-poster.jpg', import.meta.url);\n\nexport function addToggleModal() {\n  const refsModal = {\n    modalOpen: document.querySelectorAll('[data-modal-open]'),\n    modalClose: document.querySelector('[data-modal-close]'),\n    modalBackdrop: document.querySelector('.modal-movie__backdrop'),\n  };\n\n  function addModalListener() {\n    refsModal.modalBackdrop.classList.remove(\n      'modal-movie__backdrop--is-hidden'\n    );\n    window.addEventListener('keydown', onEscKeyPress);\n    loader.on();\n  }\n\n  function removeModalListener() {\n    refsModal.modalBackdrop.classList.add('modal-movie__backdrop--is-hidden');\n  }\n\n  function onBackdropClick(event) {\n    if (event.target != event.currentTarget) {\n      return;\n    }\n    removeModalListener();\n  }\n\n  function onEscKeyPress(event) {\n    if (event.code === 'Escape') {\n      removeModalListener();\n    }\n  }\n\n  refsModal.modalOpen.forEach(modal => {\n    modal.addEventListener('click', addModalListener);\n  });\n\n  refsModal.modalClose.addEventListener('click', removeModalListener);\n\n  refsModal.modalBackdrop.addEventListener('click', onBackdropClick);\n  MovieModalCreate();\n}\n\nconst modalMoviePoster = document.querySelector('.modal-movie__poster--img');\nconst modalMovieTitle = document.querySelector('.modal-movie__title');\nconst modalMovieVote = document.querySelector('.modal-movie__vote');\nconst modalMovieVotes = document.querySelector('.modal-movie__votes');\nconst modalMoviePopularity = document.querySelector('.modal-movie__popularity');\nconst modalMovieOriginalTitle = document.querySelector(\n  '.modal-movie__original-title'\n);\nconst modalMovieGenre = document.querySelector('.modal-movie__genre');\nconst modalMovieDescription = document.querySelector('.modal-movie__text');\nconst modalMovieButtonWatched = document.querySelector(\n  '.modal-movie__button--watched'\n);\nconst modalMovieButtonQueued = document.querySelector(\n  '.modal-movie__button--queue'\n);\n\nfunction MovieModalCreate() {\n  const createModalMovie = document.querySelectorAll('.movie-card__item');\n\n  createModalMovie.forEach(movie => {\n    movie.addEventListener('click', event => {\n      modalMoviePoster.src = '';\n      modalMovieTitle.innerHTML = '';\n      modalMovieVote.innerHTML = '';\n      modalMovieVotes.innerHTML = '';\n      modalMoviePopularity.innerHTML = '';\n      modalMovieOriginalTitle.innerHTML = '';\n      modalMovieGenre.innerHTML = '';\n      modalMovieDescription.innerHTML = '';\n\n      modalMovieButtonWatched.dataset.id = '';\n      modalMovieButtonQueued.dataset.id = '';\n\n      event.preventDefault();\n\n      const movieId = movie.id;\n      const movieData = fetchApiMovies.getMovieDetails(movieId);\n\n      movieData.then(value => {\n        MovieModalMurkup(value);\n      });\n      loader.off();\n    });\n\n    let onWatched = false;\n    let onQueue = false;\n\n    load('watchedList')?.forEach(movies => {\n      if (movies.id == movie.id) {\n        onWatched = true;\n      }\n    });\n\n    load('queueList')?.forEach(movies => {\n      if (movies.id == movie.id) {\n        onQueue = true;\n      }\n    });\n\n    let watchedBtn = document.querySelector('.modal-movie__button--watched');\n    let queueBtn = document.querySelector('.modal-movie__button--queue');\n\n    if (onWatched) {\n      watchedBtn.innerHTML = 'On List';\n    }\n    if (onQueue) {\n      queueBtn.innerHTML = 'On List';\n    }\n\n    const checkIfOnList = (button, listType, listTypeText) => {\n      let watched;\n      if (listTypeText == undefined) return;\n      if (listTypeText === 'watched') {\n        watched = onWatched;\n      } else if (listTypeText === 'queue') {\n        watched = onQueue;\n      }\n      if (watched) {\n        removeFromLibrary(movie.id, listType);\n        button.innerHTML = `Add to ${listTypeText}`;\n        queueBtn.disabled = false;\n        watchedBtn.disabled = false;\n      } else {\n        addToLibrary(movie.id, listType);\n        button.innerHTML = `Added`;\n        button.style.color = '#8C8C8C';\n      }\n      if (listTypeText === 'watched') {\n        onWatched = !onWatched;\n        watchedBtn.disabled = true;\n        queueBtn.disabled = true;\n      } else if (listTypeText === 'queue') {\n        onQueue = !onQueue;\n        queueBtn.disabled = true;\n        watchedBtn.disabled = true;\n      }\n    };\n\n    watchedBtn.addEventListener('click', () => {\n      checkIfOnList(watchedBtn, 'watchedList', 'watched');\n      if (\n        document.location.href.includes('library') &&\n        refs.moviesList.dataset.listtype === 'watched'\n      ) {\n        let tempLibraryList = load('watchedList');\n        getAllLibraryMovies(tempLibraryList, 'watchedList');\n      }\n    });\n    queueBtn.addEventListener('click', () => {\n      checkIfOnList(queueBtn, 'queueList', 'queue');\n      if (\n        document.location.href.includes('library') &&\n        refs.moviesList.dataset.listtype === 'queue'\n      ) {\n        let tempLibraryList = load('queueList');\n        getAllLibraryMovies(tempLibraryList, 'queueList');\n      }\n    });\n  });\n}\n\nfunction MovieModalMurkup({\n  id,\n  poster_path,\n  title,\n  original_title,\n  popularity,\n  overview,\n  genres,\n  vote_average,\n  vote_count,\n}) {\n  // checking and setting the default poster\n  if (poster_path === null) {\n    poster_path = noPoster;\n  } else {\n    poster_path = `https://image.tmdb.org/t/p/w500${poster_path}`;\n  }\n\n  modalMoviePoster.src = poster_path;\n  modalMovieTitle.innerHTML = title;\n  modalMovieVote.innerHTML = vote_average.toFixed(1);\n  modalMovieVotes.innerHTML = vote_count;\n  modalMoviePopularity.innerHTML = popularity.toFixed(1);\n  modalMovieOriginalTitle.innerHTML = original_title;\n  modalMovieGenre.innerHTML = genres.map(genre => genre.name).join(', ');\n  modalMovieDescription.innerHTML = overview;\n  modalMovieButtonWatched.dataset.id = id;\n  modalMovieButtonQueued.dataset.id = id;\n}\n","module.exports = require('./helpers/bundle-url').getBundleURL('57e37') + require('./helpers/bundle-manifest').resolve(\"jEEqz\");","\"use strict\";\n\nvar bundleURL = {};\n\nfunction getBundleURLCached(id) {\n  var value = bundleURL[id];\n\n  if (!value) {\n    value = getBundleURL();\n    bundleURL[id] = value;\n  }\n\n  return value;\n}\n\nfunction getBundleURL() {\n  try {\n    throw new Error();\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp|(chrome|moz|safari-web)-extension):\\/\\/[^)\\n]+/g);\n\n    if (matches) {\n      // The first two stack frames will be this function and getBundleURLCached.\n      // Use the 3rd one, which will be a runtime in the original bundle.\n      return getBaseURL(matches[2]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp|(chrome|moz|safari-web)-extension):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n} // TODO: Replace uses with `new URL(url).origin` when ie11 is no longer supported.\n\n\nfunction getOrigin(url) {\n  var matches = ('' + url).match(/(https?|file|ftp|(chrome|moz|safari-web)-extension):\\/\\/[^/]+/);\n\n  if (!matches) {\n    throw new Error('Origin not found');\n  }\n\n  return matches[0];\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\nexports.getOrigin = getOrigin;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"57e37\\\":\\\"library.befd36eb.js\\\",\\\"jEEqz\\\":\\\"no-poster.cf0f8928.jpg\\\",\\\"aMlYX\\\":\\\"library.18288bf3.js\\\"}\"));"],"names":["$0380ce8f1f064ccc$export$6503ec6e8aabbaf","$0380ce8f1f064ccc$export$f7ad0328861e2f03","$0380ce8f1f064ccc$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","$cqmI4","parcelRequire","$644ae9dfa4ed5fd0$var$loader","Loader","$644ae9dfa4ed5fd0$var$fetchApiMovies","$lfqeF","FetchApiMovies","$644ae9dfa4ed5fd0$var$noPoster","URL","$644ae9dfa4ed5fd0$export$58a2b242c2da4af2","refsModal","modalOpen","document","querySelectorAll","modalClose","querySelector","modalBackdrop","addModalListener","classList","remove","window","addEventListener","onEscKeyPress","on","removeModalListener","add","event","code","forEach","modal","target","currentTarget","movie","ref","ref1","$644ae9dfa4ed5fd0$var$modalMoviePoster","src","$644ae9dfa4ed5fd0$var$modalMovieTitle","innerHTML","$644ae9dfa4ed5fd0$var$modalMovieVote","$644ae9dfa4ed5fd0$var$modalMovieVotes","$644ae9dfa4ed5fd0$var$modalMoviePopularity","$644ae9dfa4ed5fd0$var$modalMovieOriginalTitle","$644ae9dfa4ed5fd0$var$modalMovieGenre","$644ae9dfa4ed5fd0$var$modalMovieDescription","$644ae9dfa4ed5fd0$var$modalMovieButtonWatched","dataset","$644ae9dfa4ed5fd0$var$modalMovieButtonQueued","preventDefault","movieId","getMovieDetails","then","value","param","poster_path","title","original_title","popularity","overview","genres","vote_average","vote_count","concat","toFixed","map","genre","name","join","off","onWatched","onQueue","$6kpMs","load","movies","watchedBtn","queueBtn","checkIfOnList","button","listType","listTypeText","watched","undefined","removeFromLibrary","disabled","addToLibrary","style","color","location","href","includes","refs","moviesList","listtype","tempLibraryList","$e07ZM","getAllLibraryMovies","module","exports","getBundleURL","resolve","$7dd1ddf6834435ca$export$bdfd709ae4826697","$7dd1ddf6834435ca$var$bundleURL","$7dd1ddf6834435ca$var$getBaseURL","url","replace","err","matches","stack","match","$7dd1ddf6834435ca$var$getBundleURL","register","JSON","parse"],"version":3,"file":"library.befd36eb.js.map"}